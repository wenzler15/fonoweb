(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Scheduler:()=>Ve});const n=require("react/jsx-runtime"),r=require("react"),a=require("@mui/material"),i=require("date-fns"),s=({date:e,onClick:t,locale:r})=>(0,n.jsxs)("div",{children:[(0,n.jsx)(a.Typography,Object.assign({style:{fontWeight:(0,i.isToday)(e)?"bold":"inherit"},color:(0,i.isToday)(e)?"primary":"inherit",className:t?"rs__hover__op":"",onClick:n=>{n.stopPropagation(),t&&t(e)}},{children:(0,i.format)(e,"dd",{locale:r})})),(0,n.jsx)(a.Typography,Object.assign({color:(0,i.isToday)(e)?"primary":"inherit",style:{fontWeight:(0,i.isToday)(e)?"bold":"inherit",fontSize:11}},{children:(0,i.format)(e,"eee",{locale:r})}))]}),o=require("@mui/icons-material/ArrowRightRounded");var l=e.n(o);const d=require("@mui/icons-material/ArrowLeftRounded");var c=e.n(d);const u=require("@mui/icons-material/EventNoteRounded");var h=e.n(u);const g=require("@mui/icons-material/ClearRounded");var p=e.n(g);const v=require("@mui/icons-material/SupervisorAccountRounded");var y=e.n(v);const m=(0,a.styled)("div")((({theme:e,dialog:t})=>({position:"relative","& .rs__table_loading":{background:t?"":(0,a.alpha)(e.palette.background.paper,.4),position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:999999,"& > span":{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& >span":{marginBottom:15}}}}))),f=(0,a.styled)("div")((({resource_count:e})=>({position:"relative",display:"flex",flexDirection:e>1?"row":"column",width:"100%",boxSizing:"content-box","& > div":{flexShrink:0,flexGrow:1}}))),j=(0,a.styled)("div")((({days:e,sticky:t="0",indent:n="1",theme:r})=>({display:"grid",gridTemplateColumns:+n>0?`10% repeat(${e}, 1fr)`:`repeat(${e}, 1fr)`,overflowX:"auto",overflowY:"hidden",position:"1"===t?"sticky":"relative",top:"1"===t?0:void 0,zIndex:"1"===t?999:void 0,[r.breakpoints.down("sm")]:{gridTemplateColumns:+n>0?`30px repeat(${e}, 1fr)`:""},borderStyle:"solid",borderColor:r.palette.grey[300],borderWidth:"0 0 0 1px","&:first-of-type":{borderWidth:"1px 0 0 1px"},"&:last-of-type":{borderWidth:"0 0 1px 1px"},"& .rs__cell":{background:r.palette.background.paper,position:"relative",borderStyle:"solid",borderColor:r.palette.grey[300],borderWidth:"0 1px 1px 0","&.rs__header":{"& > :first-of-type":{padding:"2px 5px"}},"&.rs__header__center":{padding:"6px 0px"},"&.rs__time":{display:"flex",alignItems:"center",justifyContent:"center",position:"sticky",left:0,zIndex:999,[r.breakpoints.down("sm")]:{writingMode:"vertical-rl"}},"& > button":{width:"100%",height:"100%",borderRadius:0,cursor:"pointer","&:hover":{background:(0,a.alpha)(r.palette.primary.main,.1)}},"& .rs__event__item":{position:"absolute",zIndex:1},"& .rs__multi_day":{position:"absolute",zIndex:1,textOverflow:"ellipsis"},"& .rs__block_col":{display:"block",position:"relative"},"& .rs__hover__op":{cursor:"pointer","&:hover":{opacity:.7,textDecoration:"underline"}},"&:not(.rs__time)":{minWidth:65}}}))),b=(0,a.styled)(a.Paper)((({theme:e,color:t,disabled:n})=>({width:"99.5%",height:"100%",display:"block",background:n?"#d0d0d0":t||e.palette.primary.main,color:n?"#808080":e.palette.primary.contrastText,cursor:n?"not-allowed":"pointer",overflow:"hidden","& .MuiButtonBase-root":{width:"100%",height:"100%",display:"block",textAlign:"left","& > div":{height:"100%"}}}))),x=(0,a.styled)("div")((({theme:e})=>({maxWidth:"100%",width:400,"& > div":{padding:"5px 10px","& .rs__popper_actions":{display:"flex",alignItems:"center",justifyContent:"space-between","& .MuiIconButton-root":{color:e.palette.primary.contrastText}}}}))),O=(0,a.styled)("div")((({theme:e})=>({display:"inherit","& .MuiIconButton-root":{color:e.palette.primary.contrastText},"& .MuiButton-root":{"&.delete":{color:e.palette.error.main},"&.cancel":{color:e.palette.action.disabled}}}))),w=(0,a.styled)("div")((({theme:e})=>({position:"absolute",zIndex:2,width:"100%",display:"flex","& > div:first-of-type":{height:12,width:12,borderRadius:"50%",background:e.palette.error.light,marginLeft:-6,marginTop:-5},"& > div:last-of-type":{borderTop:`solid 2px ${e.palette.error.light}`,width:"100%"}}))),_=require("@mui/icons-material/DeleteRounded");var D=e.n(_);const k=require("@mui/icons-material/EditRounded");var C=e.n(k);const T=require("date-fns/locale/en-US");var M=e.n(T);const S=(e,t,n)=>{var r;const a=(null===(r=e.config)||void 0===r?void 0:r.multiple)&&!Array.isArray((null==n?void 0:n[e.name])||e.default),i=a?t?[t]:[]:t;return{value:i,validity:a?i.length:i}},F=(e,t,n,r)=>{var a;const i=n.idField,s=r.find((e=>e.name===i)),o=!!(null===(a=null==s?void 0:s.config)||void 0===a?void 0:a.multiple),l=[];for(const r of e){const e=o&&!Array.isArray(r[i])?[r[i]]:r[i];(o||Array.isArray(e)?e.includes(t[i]):e===t[i])&&l.push(Object.assign(Object.assign({},r),{color:r.color||t[n.colorField||""]}))}return l},E=(e,t)=>Math.ceil(e)/t,I=(e,t)=>Math.max(e/t,60),P=(e,t)=>(0,i.differenceInDays)((0,i.endOfDay)((0,i.addSeconds)(t,-1)),(0,i.startOfDay)(e)),R=(e,t,n)=>{const r=[];for(let a=0;a<e.length;a++){const s=H(e[a],n);s.allDay||!(0,i.isSameDay)(t,s.start)||P(s.start,s.end)||r.push(s)}return $(r)},$=e=>e.sort(((e,t)=>{const n=e.end.getTime()-e.start.getTime();return t.end.getTime()-t.start.getTime()-n})),W=(e,t,n)=>{const r=[];for(let a=0;a<e.length;a++){const s=H(e[a],n);let o=s.allDay||P(s.start,s.end)>0;o&&(o=Array.isArray(t)?t.some((e=>(0,i.isWithinInterval)(e,{start:(0,i.startOfDay)(s.start),end:(0,i.endOfDay)(s.end)}))):(0,i.isWithinInterval)(t,{start:(0,i.startOfDay)(s.start),end:(0,i.endOfDay)(s.end)}),o&&r.push(s))}return r},H=(e,t)=>Object.assign(Object.assign({},e),{start:z(e.start,t),end:z(e.end,t)}),z=(e,t)=>new Date(new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"medium",timeZone:t}).format(e));var B=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};const N={weekDays:[0,1,2,3,4,5,6],weekStartOn:6,startHour:9,endHour:17,navigation:!0,disableGoToDay:!1},q={weekDays:[0,1,2,3,4,5,6],weekStartOn:6,startHour:9,endHour:17,step:60,navigation:!0,disableGoToDay:!1},A={startHour:9,endHour:17,step:60,navigation:!0},L={idField:"assignee",textField:"text",subTextField:"subtext",avatarField:"avatar",colorField:"color"},V=(e={})=>{const{navigation:t,form:n,event:r}=e,a=B(e,["navigation","form","event"]);return Object.assign({navigation:Object.assign({month:"Month",week:"Week",day:"Day",today:"Today"},t),form:Object.assign({addTitle:"Add Event",editTitle:"Edit Event",confirm:"Confirm",delete:"Delete",cancel:"Cancel"},n),event:Object.assign({title:"Title",start:"Start",end:"End",allDay:"All Day"},r)},Object.assign({moreEvents:"More...",loading:"Loading..."},a))},G=e=>{const{month:t,week:n,day:r,translations:a,resourceFields:i,view:s}=e,o=B(e,["month","week","day","translations","resourceFields","view"]),l=(e=>{const{month:t,week:n,day:r}=e;return{month:null!==t?Object.assign(N,t):null,week:null!==n?Object.assign(q,n):null,day:null!==r?Object.assign(A,r):null}})(e),d=s||"week",c=l[d]?d:(e=>{if(e.month)return"month";if(e.week)return"week";if(e.day)return"day";throw new Error("No views were selected")})(l);return Object.assign(Object.assign(Object.assign({},l),{translations:V(a),resourceFields:Object.assign(L,i),view:c}),Object.assign({height:600,navigation:!0,selectedDate:new Date,disableViewNavigator:!1,events:[],fields:[],loading:void 0,customEditor:void 0,onConfirm:void 0,onDelete:void 0,viewerExtraComponent:void 0,resources:[],recourseHeaderComponent:void 0,resourceViewMode:"default",direction:"ltr",dialogMaxWidth:"md",locale:M(),deletable:!0,editable:!0,hourFormat:"12",draggable:!0},o))},Z=Object.assign(Object.assign({},G({})),{setProps:()=>{},dialog:!1,selectedRange:void 0,selectedEvent:void 0,selectedResource:void 0,handleState:()=>{},getViews:()=>[],triggerDialog:()=>{},triggerLoading:()=>{},handleGotoDay:()=>{},confirmEvent:()=>{},onDrop:()=>{}}),K=(0,r.createContext)(Z),X=()=>(0,r.useContext)(K),U=({event:e,onDelete:t,onEdit:i,direction:s,editable:o,deletable:l})=>{const{translations:d}=X(),[c,u]=(0,r.useState)(!1),h=()=>{if(!c)return u(!0);t()},g=(0,r.useMemo)((()=>void 0!==e.deletable?e.deletable:l),[l,e.deletable]),p=(0,r.useMemo)((()=>void 0!==e.editable?e.editable:o),[o,e.editable]);return(0,n.jsxs)(O,{children:[(0,n.jsx)(a.Grow,Object.assign({in:!c,exit:!1,timeout:400,unmountOnExit:!0},{children:(0,n.jsxs)("div",{children:[p&&(0,n.jsx)(a.IconButton,Object.assign({size:"small",onClick:i},{children:(0,n.jsx)(C(),{})})),g&&(0,n.jsx)(a.IconButton,Object.assign({size:"small",onClick:h},{children:(0,n.jsx)(D(),{})}))]})})),(0,n.jsx)(a.Slide,Object.assign({in:c,direction:"rtl"===s?"right":"left",unmountOnExit:!0,timeout:400,exit:!1},{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(a.Button,Object.assign({className:"delete",size:"small",onClick:h},{children:d.form.delete.toUpperCase()})),(0,n.jsx)(a.Button,Object.assign({className:"cancel",size:"small",onClick:()=>u(!1)},{children:d.form.cancel.toUpperCase()}))]})}))]})};const Q=({event:e,multiday:t,hasPrev:s,hasNext:o,showdate:d})=>{const{triggerDialog:u,onDelete:g,events:v,handleState:m,triggerLoading:f,customViewer:j,viewerExtraComponent:O,fields:w,direction:_,resources:D,resourceFields:k,locale:C,viewerTitleComponent:T,editable:M,deletable:S,hourFormat:F,eventRenderer:E,onEventClick:I,view:R,draggable:$,translations:W}=X(),H=(e=>{const t=(0,a.useTheme)();return{draggable:!0,onDragStart:n=>{n.stopPropagation(),n.dataTransfer.setData("text/plain",`${e.event_id}`),n.currentTarget.style.backgroundColor=t.palette.error.main},onDragEnd:n=>{n.currentTarget.style.backgroundColor=e.color||t.palette.primary.main},onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDragEnter:e=>{e.stopPropagation(),e.preventDefault()}}})(e),[z,B]=(0,r.useState)(null),[N,q]=(0,r.useState)(!1),A=(0,a.useTheme)(),L="12"===F?"hh:mm a":"HH:mm",V="rtl"===_?c():l(),G="rtl"===_?l():c(),Z=P(e.start,e.end)<=0&&e.allDay,K=e=>{!(null==e?void 0:e.currentTarget)&&N&&q(!1),B((null==e?void 0:e.currentTarget)||null)},Q=()=>{return t=void 0,n=void 0,a=function*(){try{f(!0);let t=e.event_id;if(g){const e=yield g(t);t=e||""}if(t){K();const e=v.filter((e=>e.event_id!==t));m(e,"events")}}catch(e){console.error(e)}finally{f(!1)}},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,o)}l((a=a.apply(t,n||[])).next())}));var t,n,r,a},Y=(0,r.useMemo)((()=>{if(e.disabled)return!1;let t=void 0===$||$;return void 0!==e.draggable&&(t=e.draggable),t}),[$,e.disabled,e.draggable]),J=(0,r.useMemo)((()=>{if("function"==typeof E&&!t&&"month"!==R){const t=E(Object.assign({event:e,onClick:K},H));if(t)return(0,n.jsx)(b,{children:t},`${e.start.getTime()}_${e.end.getTime()}_${e.event_id}`)}let r=(0,n.jsxs)("div",Object.assign({style:{padding:"2px 6px"}},{children:[(0,n.jsx)(a.Typography,Object.assign({variant:"subtitle2",style:{fontSize:12},noWrap:!0},{children:e.title})),d&&(0,n.jsx)(a.Typography,Object.assign({style:{fontSize:11},noWrap:!0},{children:`${(0,i.format)(e.start,L,{locale:C})} - ${(0,i.format)(e.end,L,{locale:C})}`}))]}));return t&&(r=(0,n.jsxs)("div",Object.assign({style:{padding:2,display:"flex",alignItems:"center",justifyContent:"space-between"}},{children:[(0,n.jsx)(a.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:s?(0,n.jsx)(G,{fontSize:"small",sx:{display:"flex"}}):d&&!Z&&(0,i.format)(e.start,L,{locale:C})})),(0,n.jsx)(a.Typography,Object.assign({variant:"subtitle2",align:"center",sx:{fontSize:12},noWrap:!0},{children:e.title})),(0,n.jsx)(a.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:o?(0,n.jsx)(V,{fontSize:"small",sx:{display:"flex"}}):d&&!Z&&(0,i.format)(e.end,L,{locale:C})}))]}))),(0,n.jsx)(b,Object.assign({color:e.color,disabled:e.disabled},{children:(0,n.jsx)(a.ButtonBase,Object.assign({onClick:t=>{t.preventDefault(),t.stopPropagation(),K(t),"function"==typeof I&&I(e)},disabled:e.disabled},{children:(0,n.jsx)("div",Object.assign({},H,{draggable:Y},{children:r}))}))}),`${e.start.getTime()}_${e.end.getTime()}_${e.event_id}`)}),[s,o,e,Y,C,A.palette]);return(0,n.jsxs)(r.Fragment,{children:[J,(0,n.jsx)(a.Popover,Object.assign({open:Boolean(z),anchorEl:z,onClose:()=>{K()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClick:e=>{e.stopPropagation()}},{children:"function"==typeof j?j(e,(()=>K())):(()=>{const t=k.idField,r=D.filter((n=>Array.isArray(e[t])?e[t].includes(n[t]):n[t]===e[t]));return(0,n.jsxs)(x,{children:[(0,n.jsxs)("div",Object.assign({style:{background:e.color||A.palette.primary.main,color:A.palette.primary.contrastText}},{children:[(0,n.jsxs)("div",Object.assign({className:"rs__popper_actions"},{children:[(0,n.jsx)("div",{children:(0,n.jsx)(a.IconButton,Object.assign({size:"small",onClick:()=>{K()}},{children:(0,n.jsx)(p(),{color:"disabled"})}))}),(0,n.jsx)(U,{event:e,onDelete:Q,onEdit:()=>{K(),u(!0,e)},direction:_,deletable:S,editable:M})]})),T instanceof Function?T(e):(0,n.jsx)(a.Typography,Object.assign({style:{padding:"5px 0"},noWrap:!0},{children:e.title}))]})),(0,n.jsxs)("div",Object.assign({style:{padding:"5px 10px"}},{children:[(0,n.jsxs)(a.Typography,Object.assign({style:{display:"flex",alignItems:"center",gap:8},color:"textSecondary",variant:"caption",noWrap:!0},{children:[(0,n.jsx)(h(),{}),Z?W.event.allDay:`${(0,i.format)(e.start,`dd MMMM yyyy ${L}`,{locale:C})} - ${(0,i.format)(e.end,`dd MMMM yyyy ${L}`,{locale:C})}`]})),r.length>0&&(0,n.jsxs)(a.Typography,Object.assign({style:{display:"flex",alignItems:"center",gap:8},color:"textSecondary",variant:"caption",noWrap:!0},{children:[(0,n.jsx)(y(),{}),r.map((e=>e[k.textField])).join(", ")]})),O instanceof Function?O(w,e):O]}))]})})()}))]})};Q.defaultProps={multiday:!1,showdate:!0};const Y=Q,J=({resource:e})=>{const{recourseHeaderComponent:t,resourceFields:i,resources:s,direction:o,resourceViewMode:l}=X(),{width:d}=function(){const[e,t]=(0,r.useState)({width:0,height:0});return(0,r.useEffect)((()=>{if("undefined"==typeof window)return;const e=()=>{t((e=>{const{innerWidth:t,innerHeight:n}=window;return e.width!==t||e.height!==n?{width:t,height:n}:e}))};return e(),window.addEventListener("resize",e,{capture:!1,passive:!0}),()=>{window.removeEventListener("resize",e)}}),[]),e}(),c=e[i.textField],u=e[i.subTextField||""],h=e[i.avatarField||""],g=e[i.colorField||""];if(t instanceof Function)return t(e);const p="tabs"===l?{}:{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px"};return(0,n.jsxs)(a.ListItem,Object.assign({sx:Object.assign({padding:"2px 10px",textAlign:"rtl"===o?"right":"left"},p),component:"span"},{children:[(0,n.jsx)(a.ListItemAvatar,{children:(0,n.jsx)(a.Avatar,{style:{background:g},alt:c,src:h})}),(0,n.jsx)(a.ListItemText,{primary:(0,n.jsx)(a.Typography,Object.assign({variant:"body2",noWrap:!0},{children:c})),secondary:(0,n.jsx)(a.Typography,Object.assign({variant:"caption",color:"textSecondary",noWrap:!0},{children:u})),style:{width:d/(s.length+1)}})]}))},ee=require("prop-types");var te=e.n(ee);const ne=require("@mui/material/styles");function re(e){const{children:t,value:r,index:a}=e;return r===a?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsx)(n.Fragment,{})}re.propTypes={children:te().node,index:te().any.isRequired,value:te().any.isRequired};const ae=(0,ne.styled)("div")((({theme:e})=>({flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,alignSelf:"center","& .tabs":{borderColor:e.palette.grey[300],borderStyle:"solid",borderWidth:1,"& button.MuiTab-root":{borderColor:e.palette.grey[300],borderRightStyle:"solid",borderWidth:1}},"& .primary":{background:e.palette.primary.main},"& .secondary":{background:e.palette.secondary.main},"& .error":{background:e.palette.error.main},"& .info":{background:e.palette.info.dark},"& .text_primary":{color:e.palette.primary.main},"& .text_secondary":{color:e.palette.secondary.main},"& .text_error":{color:e.palette.error.main},"& .text_info":{color:e.palette.info.dark}}))),ie=({tabs:e,variant:t,tab:r,setTab:i,indicator:s,style:o})=>(0,n.jsxs)(ae,Object.assign({style:o},{children:[(0,n.jsx)(a.Tabs,Object.assign({value:r,variant:t,scrollButtons:!0,className:"tabs",classes:{indicator:s}},{children:e.map(((e,t)=>{return(0,n.jsx)(a.Tab,Object.assign({label:e.label,value:e.id},{id:`scrollable-auto-tab-${r=e.id}`,"aria-controls":`scrollable-auto-tabpanel-${r}`},{onClick:()=>i(e.id),onDragEnter:()=>i(e.id)}),e.id||t);var r}))})),e.map(((e,t)=>e.component&&(0,n.jsx)(re,Object.assign({value:r,index:e.id},{children:e.component}),t)))]}));ie.defaultProps={variant:"scrollable",indicator:"primary"};const se=({renderChildren:e})=>{const{resourceViewMode:t}=X();return"tabs"===t?(0,n.jsx)(le,{renderChildren:e}):(0,n.jsx)(oe,{renderChildren:e})},oe=({renderChildren:e})=>{const{resources:t,resourceFields:r}=X();return(0,n.jsx)(n.Fragment,{children:t.map(((t,a)=>(0,n.jsxs)("div",{children:[(0,n.jsx)(J,{resource:t}),e(t)]},`${t[r.idField]}_${a}`)))})},le=({renderChildren:e})=>{const{resources:t,resourceFields:a,selectedResource:i,handleState:s}=X(),o=t.map((t=>({id:t[a.idField],label:(0,n.jsx)(J,{resource:t}),component:(0,n.jsx)(n.Fragment,{children:e(t)})}))),l=(0,r.useMemo)((()=>{const e=t[0][a.idField];return i?t.findIndex((e=>e[a.idField]===i))<0?e:i:e}),[t,i,a.idField]);return(0,n.jsx)(ie,{tabs:o,tab:l,setTab:e=>{s(e,"selectedResource")},style:{display:"grid"}})};se.defaultProps={span:1};const de=({day:e,start:t,end:r,resourceKey:i,resourceVal:s,cellRenderer:o,height:l,children:d})=>{const c=(({start:e,end:t,resourceKey:n,resourceVal:r})=>{const{triggerDialog:i,onDrop:s}=X(),o=(0,a.useTheme)();return{onClick:()=>{i(!0,{start:e,end:t,[n]:r})},onDragOver:e=>{e.currentTarget.style.backgroundColor=(0,a.alpha)(o.palette.secondary.main,.3),e.preventDefault()},onDragEnter:e=>{e.currentTarget.style.backgroundColor=(0,a.alpha)(o.palette.secondary.main,.3)},onDragLeave:e=>{e.currentTarget.style.backgroundColor=""},onDrop:t=>{t.preventDefault(),t.currentTarget.style.backgroundColor="";const a=t.dataTransfer.getData("text");s(a,e,n,r)},[n]:r}})({start:t,end:r,resourceKey:i,resourceVal:s});return o?o(Object.assign({day:e,start:t,end:r,height:l},c)):(0,n.jsx)(a.Button,Object.assign({fullWidth:!0,"aria-label":`${t.toLocaleString("en",{dateStyle:"full",timeStyle:"long"})} - ${r.toLocaleString("en",{dateStyle:"full",timeStyle:"long"})}`},c,{children:d}))},ce=1;function ue({today:e,startHour:t,step:n,minuteHeight:r,timeZone:a}){const s=z(new Date,a),o=(0,i.differenceInMinutes)(s,(0,i.setHours)(e,t));return o*r+(o/n+ce)}const he=e=>{const[t,a]=(0,r.useState)(ue(e));return(0,r.useEffect)((()=>{const t=setInterval((()=>a(ue(e))),6e4);return()=>clearInterval(t)}),[]),t<0?null:(0,n.jsx)(r.Fragment,{children:(0,n.jsxs)(w,Object.assign({style:{top:t}},{children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]}))})},ge=({todayEvents:e,today:t,startHour:a,step:s,minuteHeight:o,direction:l,timeZone:d})=>{const c=[];return(0,n.jsxs)(r.Fragment,{children:[(0,i.isToday)(t)&&(0,n.jsx)(he,{today:t,startHour:a,step:s,minuteHeight:o,timeZone:d}),e.map(((r,d)=>{const u=(0,i.differenceInMinutes)(r.end,r.start)*o-ce,h=(0,i.differenceInMinutes)(r.start,(0,i.setHours)(t,a)),g=u/60*ce,p=h*o+h/s,v=((e,t)=>e.filter((e=>e.event_id!==t.event_id&&((0,i.isWithinInterval)((0,i.addMinutes)(t.start,1),{start:e.start,end:e.end})||(0,i.isWithinInterval)((0,i.addMinutes)(t.end,-1),{start:e.start,end:e.end})||(0,i.isWithinInterval)((0,i.addMinutes)(e.start,1),{start:t.start,end:t.end})||(0,i.isWithinInterval)((0,i.addMinutes)(e.end,-1),{start:t.start,end:t.end})))))(e,r),y=v.filter((e=>c.includes(e.event_id)));return c.push(r.event_id),(0,n.jsx)("div",Object.assign({className:"rs__event__item",style:{height:u+g,top:p,width:y.length>0?`calc(100% - ${100-98/(y.length+1)}%)`:"98%",zIndex:e.length+d,["rtl"===l?"right":"left"]:y.length>0?100/(v.length+1)*y.length+"%":""}},{children:(0,n.jsx)(Y,{event:r})}),r.event_id)}))]})},pe=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const n=e.current,r=t.current,a=e=>{const t=e.currentTarget;null==r||r.scroll({left:t.scrollLeft}),null==n||n.scroll({left:t.scrollLeft})};return null==n||n.addEventListener("scroll",a),null==r||r.addEventListener("scroll",a),()=>{null==n||n.removeEventListener("scroll",a),null==r||r.removeEventListener("scroll",a)}})),{headersRef:e,bodyRef:t}};const ve=()=>{const{week:e,selectedDate:t,height:o,events:l,handleGotoDay:d,getRemoteEvents:c,triggerLoading:u,handleState:h,resources:g,resourceFields:p,resourceViewMode:v,fields:y,direction:m,locale:f,hourFormat:b,timeZone:x}=X(),{weekStartOn:O,weekDays:w,startHour:_,endHour:D,step:k,cellRenderer:C,disableGoToDay:T,headRenderer:M}=e,S=(0,i.startOfWeek)(t,{weekStartsOn:O}),$=w.map((e=>(0,i.addDays)(S,e))),H=(0,i.startOfDay)($[0]),B=(0,i.endOfDay)($[$.length-1]),N=(0,i.set)(t,{hours:_,minutes:0,seconds:0}),q=(0,i.set)(t,{hours:D,minutes:-k,seconds:0}),A=(0,i.eachMinuteOfInterval)({start:N,end:q},{step:k}),L=I(o,A.length),V=E(L,k),G="12"===b?"hh:mm a":"HH:mm",{headersRef:Z,bodyRef:K}=pe(),U=(0,r.useCallback)((()=>{return e=void 0,t=void 0,r=function*(){try{u(!0);const e=yield c({start:H,end:B,view:"week"});Array.isArray(e)&&h(e,"events")}catch(e){throw e}finally{u(!1)}},new((n=void 0)||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r}),[t,c]);(0,r.useEffect)((()=>{c instanceof Function&&U()}),[U,c]);const Q=(e,t)=>{const r=(0,i.isSameDay)(H,t);return W(e,$,x).filter((e=>(0,i.isBefore)(e.start,H)?r:(0,i.isSameDay)(e.start,t))).sort(((e,t)=>t.end.getTime()-e.end.getTime())).map(((a,s)=>{const o=(0,i.isBefore)((0,i.startOfDay)(a.start),H),l=(0,i.isAfter)((0,i.endOfDay)(a.end),B),d=P(o?H:a.start,l?B:a.end)+1,c=e.filter((e=>!r&&e.event_id!==a.event_id&&(0,i.isWithinInterval)(t,{start:z(e.start,x),end:z(e.end,x)})));let u=s;return c.length&&(u+=c.length),(0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*u+45,width:99.9*d+"%",overflowX:"hidden"}},{children:(0,n.jsx)(Y,{event:a,hasPrev:o,hasNext:l,multiday:!0})}),a.event_id)}))},J=e=>{let t=l;e&&(t=F(l,e,p,y));const o=g.length&&"tabs"!==v,c=28*W(o?l:t,$,x).length+45;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(j,Object.assign({days:$.length,ref:Z,sticky:"1"},{children:[(0,n.jsx)("span",{className:"rs__cell rs__time"}),$.map(((e,r)=>(0,n.jsxs)("span",Object.assign({className:"rs__cell rs__header "+((0,i.isToday)(e)?"rs__today_cell":""),style:{height:c}},{children:["function"==typeof M?(0,n.jsx)("div",{children:M(e)}):(0,n.jsx)(s,{date:e,onClick:T?void 0:d,locale:f}),Q(t,e)]}),r)))]})),(0,n.jsx)(j,Object.assign({days:$.length,ref:K},{children:A.map(((s,o)=>(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)("span",Object.assign({style:{height:L},className:"rs__cell rs__header rs__time"},{children:(0,n.jsx)(a.Typography,Object.assign({variant:"caption"},{children:(0,i.format)(s,G,{locale:f})}))})),$.map(((r,a)=>{const l=new Date(`${(0,i.format)(r,"yyyy/MM/dd")} ${(0,i.format)(s,G)}`),d=(0,i.addMinutes)(l,k),c=p.idField;return(0,n.jsxs)("span",Object.assign({className:"rs__cell "+((0,i.isToday)(r)?"rs__today_cell":"")},{children:[0===o&&(0,n.jsx)(ge,{todayEvents:R(t,r,x),today:r,minuteHeight:V,startHour:_,step:k,direction:m,timeZone:x}),(0,n.jsx)(de,{start:l,end:d,day:r,height:L,resourceKey:c,resourceVal:e?e[c]:null,cellRenderer:C})]}),a)}))]},o)))}))]})};return g.length?(0,n.jsx)(se,{renderChildren:J}):J()},ye=require("@mui/x-date-pickers/LocalizationProvider"),me=require("@mui/x-date-pickers/AdapterDateFns"),fe=({children:e})=>{const{locale:t}=X();return(0,n.jsx)(ye.LocalizationProvider,Object.assign({dateAdapter:me.AdapterDateFns,adapterLocale:t},{children:e}))},je=require("@mui/icons-material/NavigateBeforeRounded");var be=e.n(je);const xe=require("@mui/icons-material/NavigateNextRounded");var Oe=e.n(xe);const we=e=>{var{type:t,onClick:r}=e,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["type","onClick"]);const{direction:s}=X();let o=Oe();return"prev"===t?o="rtl"===s?Oe():be():"next"===t&&(o="rtl"===s?be():Oe()),(0,n.jsx)(a.IconButton,Object.assign({style:{padding:2},onClick:r,onDragOver:e=>{e.preventDefault(),r&&r()}},i,{children:(0,n.jsx)(o,{})}))},_e=require("@mui/x-date-pickers"),De=({selectedDate:e,onChange:t,weekProps:s})=>{const{locale:o,navigationPickerProps:l}=X(),[d,c]=(0,r.useState)(null),{weekStartOn:u}=s,h=(0,i.startOfWeek)(e,{weekStartsOn:u}),g=(0,i.endOfWeek)(e,{weekStartsOn:u}),p=()=>{c(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(we,{type:"prev",onClick:()=>{const e=(0,i.addDays)(h,-1);t(e)},"aria-label":"previous week"}),(0,n.jsx)(a.Button,Object.assign({style:{padding:4},onClick:e=>{c(e.currentTarget)},"aria-label":"selected week"},{children:`${(0,i.format)(h,"dd",{locale:o})} - ${(0,i.format)(g,"dd MMMM yyyy",{locale:o})}`})),(0,n.jsx)(a.Popover,Object.assign({open:Boolean(d),anchorEl:d,onClose:p,anchorOrigin:{vertical:"bottom",horizontal:"left"}},{children:(0,n.jsx)(fe,{children:(0,n.jsx)(_e.DateCalendar,Object.assign({},l,{openTo:"day",views:["month","day"],value:e,onChange:e=>{t(e||new Date),p()}}))})})),(0,n.jsx)(we,{type:"next",onClick:()=>{const e=(0,i.addDays)(g,1);t(e)},"aria-label":"next week"})]})},ke=({selectedDate:e,onChange:t})=>{const{locale:s,navigationPickerProps:o}=X(),[l,d]=(0,r.useState)(null),c=()=>{d(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(we,{type:"prev",onClick:()=>{const n=(0,i.addDays)(e,-1);t(n)},"aria-label":"previous day"}),(0,n.jsx)(a.Button,Object.assign({style:{padding:4},onClick:e=>{d(e.currentTarget)},"aria-label":"selected date"},{children:(0,i.format)(e,"dd MMMM yyyy",{locale:s})})),(0,n.jsx)(a.Popover,Object.assign({open:Boolean(l),anchorEl:l,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"left"}},{children:(0,n.jsx)(fe,{children:(0,n.jsx)(_e.DateCalendar,Object.assign({},o,{openTo:"day",views:["month","day"],value:e,onChange:e=>{t(e||new Date),c()}}))})})),(0,n.jsx)(we,{type:"next",onClick:()=>{const n=(0,i.addDays)(e,1);t(n)},"aria-label":"next day"})]})},Ce=({selectedDate:e,onChange:t})=>{const{locale:s,navigationPickerProps:o}=X(),l=(0,i.getMonth)(e),[d,c]=(0,r.useState)(null),u=()=>{c(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(we,{type:"prev",onClick:()=>{const n=l-1;t((0,i.setMonth)(e,n))},"aria-label":"previous month"}),(0,n.jsx)(a.Button,Object.assign({style:{padding:4},onClick:e=>{c(e.currentTarget)},"aria-label":"selected month"},{children:(0,i.format)(e,"MMMM yyyy",{locale:s})})),(0,n.jsx)(a.Popover,Object.assign({open:Boolean(d),anchorEl:d,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"left"}},{children:(0,n.jsx)(fe,{children:(0,n.jsx)(_e.DateCalendar,Object.assign({},o,{openTo:"month",views:["year","month"],value:e,onChange:e=>{t(e||new Date),u()}}))})})),(0,n.jsx)(we,{type:"next",onClick:()=>{const n=l+1;t((0,i.setMonth)(e,n))},"aria-label":"next month"})]})},Te=require("@mui/icons-material/MoreVert");var Me=e.n(Te);const Se=()=>{const{selectedDate:e,view:t,week:i,handleState:s,getViews:o,translations:l,navigation:d,day:c,month:u,disableViewNavigator:h,onSelectedDateChange:g,onViewChange:p}=X(),[v,y]=(0,r.useState)(null),m=(0,a.useTheme)(),f=(0,a.useMediaQuery)(m.breakpoints.up("sm")),j=o(),b=e=>{y(e||null)},x=e=>{s(e,"selectedDate"),g&&"function"==typeof g&&g(e)},O=e=>{s(e,"view"),p&&"function"==typeof p&&p(e)};return!d&&h?null:(0,n.jsxs)("div",Object.assign({style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},{children:[(0,n.jsx)("div",Object.assign({"data-testid":"date-navigator"},{children:d&&(()=>{switch(t){case"month":return(null==u?void 0:u.navigation)&&(0,n.jsx)(Ce,{selectedDate:e,onChange:x});case"week":return(null==i?void 0:i.navigation)&&(0,n.jsx)(De,{selectedDate:e,onChange:x,weekProps:i});case"day":return(null==c?void 0:c.navigation)&&(0,n.jsx)(ke,{selectedDate:e,onChange:x});default:return""}})()})),(0,n.jsxs)("div",Object.assign({"data-testid":"view-navigator",style:{visibility:h?"hidden":"visible"}},{children:[(0,n.jsx)(a.Button,Object.assign({onClick:()=>x(new Date),"aria-label":l.navigation.today},{children:l.navigation.today})),j.length>1&&(f?j.map((e=>(0,n.jsx)(a.Button,Object.assign({color:e===t?"primary":"inherit",onClick:()=>O(e),onDragOver:t=>{t.preventDefault(),O(e)}},{children:l.navigation[e]}),e))):(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(a.IconButton,Object.assign({style:{padding:5},onClick:e=>{b(e.currentTarget)}},{children:(0,n.jsx)(Me(),{})})),(0,n.jsx)(a.Popover,Object.assign({open:Boolean(v),anchorEl:v,onClose:()=>{b()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},{children:(0,n.jsx)(a.MenuList,Object.assign({autoFocusItem:!!v,disablePadding:!0},{children:j.map((e=>(0,n.jsx)(a.MenuItem,Object.assign({selected:e===t,onClick:()=>{b(),O(e)}},{children:l.navigation[e]}),e)))}))}))]}))]}))]}))},Fe=require("@mui/x-date-pickers/DatePicker"),Ee=require("@mui/x-date-pickers/DateTimePicker"),Ie=({type:e,value:t,label:r,name:a,onChange:i,variant:s,error:o,errMsg:l})=>{const d="date"===e?Fe.DatePicker:Ee.DateTimePicker;return(0,n.jsx)(fe,{children:(0,n.jsx)(d,{value:t,label:r,onChange:e=>i(a,new Date(e||"")),minutesStep:5,slotProps:{textField:{variant:s,helperText:o?l:"",error:o,fullWidth:!0}}})})};Ie.defaultProps={type:"datetime",variant:"outlined"};const Pe=({variant:e,label:t,placeholder:i,value:s,name:o,required:l,min:d,max:c,email:u,decimal:h,onChange:g,disabled:p,multiline:v,rows:y,touched:m})=>{const[f,j]=(0,r.useState)({touched:!1,valid:!1,errorMsg:""});(0,r.useEffect)((()=>{m&&b(s)}),[m]);const b=e=>{const t=e;let n=!0,r="";u&&(n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)&&n,r="Invalid Email"),h&&(n=/^[0-9]+(\.[0-9]*)?$/.test(t)&&n,r="Only Numbers Allowed"),d&&`${t}`.trim().length<d&&(n=!1,r=`Minimum ${d} letters`),c&&`${t}`.trim().length>c&&(n=!1,r=`Maximum ${c} letters`),l&&`${t}`.trim().length<=0&&(n=!1,r="Required"),j({touched:!0,valid:n,errorMsg:r}),g(o,t,n)};return(0,n.jsx)(a.TextField,{variant:e,label:t&&(0,n.jsx)(a.Typography,Object.assign({variant:"body2"},{children:`${t} ${l?"*":""}`})),value:s,name:o,onChange:e=>b(e.target.value),disabled:p,error:f.touched&&!f.valid,helperText:f.touched&&!f.valid&&f.errorMsg,multiline:v,rows:y,style:{width:"100%"},InputProps:{placeholder:i||""}})};Pe.defaultProps={variant:"outlined"};const Re=require("@mui/icons-material/ExpandMore");var $e=e.n(Re);const We=({options:e,value:t,name:i,required:s,onChange:o,label:l,disabled:d,touched:c,variant:u,loading:h,multiple:g,placeholder:p,errMsg:v})=>{const y=(0,a.useTheme)(),[m,f]=(0,r.useState)({touched:!1,valid:!!t,errorMsg:v||(s?"Required":void 0)});(0,r.useEffect)((()=>{c&&j(t)}),[c]);const j=e=>{const t=e;let n=!0,r=v;!s||(g?t.length:t)||(n=!1,r="Required"),f((e=>Object.assign(Object.assign({},e),{touched:!0,valid:n,errorMsg:r}))),o(i,t,n)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.FormControl,Object.assign({variant:u||"outlined",fullWidth:!0,error:s&&m.touched&&!m.valid,disabled:d},{children:[l&&(0,n.jsx)(a.InputLabel,Object.assign({id:`input_${i}`},{children:(0,n.jsx)(a.Typography,Object.assign({variant:"body2"},{children:`${l} ${s?"*":""}`}))})),(0,n.jsxs)(a.Select,Object.assign({label:l,labelId:`input_${i}`,value:t,onBlur:()=>{m.touched||f((e=>Object.assign(Object.assign({},e),{touched:!0,errorMsg:v||e.errorMsg})))},onChange:e=>j(e.target.value),IconComponent:h?()=>(0,n.jsx)(a.CircularProgress,{size:5}):$e(),multiple:!!g,classes:{select:"chips"===g?"flex__wrap":void 0},renderValue:t=>{if(!t||0===t.length)return(0,n.jsx)("em",{children:l});const r=[];if(g){for(const n of e)t.includes(n.value)&&r.push([n.text]);return"chips"===g?r.map(((e,t)=>(0,n.jsx)(a.Chip,{label:e,style:{margin:"0 2px"},color:"primary"},`${e}_${t}`))):r.join(",")}for(const n of e)t===n.value&&r.push([n.text]);return r.join(",")}},{children:[p&&(0,n.jsx)(a.MenuItem,Object.assign({value:""},{children:(0,n.jsx)("em",{children:p})})),e.map((e=>(0,n.jsxs)(a.MenuItem,Object.assign({value:e.value},{children:[g&&(0,n.jsx)(a.Checkbox,{checked:t.indexOf(e.value)>-1,color:"primary"}),e.text]}),e.id||e.value)))]}))]})),(0,n.jsx)(a.FormHelperText,Object.assign({style:{color:y.palette.error.main}},{children:m.touched&&!m.valid&&m.errorMsg}))]})};We.defaultProps={variant:"outlined"};const He=(e,t)=>{var n;const r={};for(const a of e){const e=S(a,a.default,t),i=S(a,null==t?void 0:t[a.name],t);r[a.name]={value:i.value||e.value||"",validity:!(null===(n=a.config)||void 0===n?void 0:n.required)||!!i.validity||!!e.validity,type:a.type,config:a.config}}return Object.assign({event_id:{value:(null==t?void 0:t.event_id)||null,validity:!0,type:"hidden"},title:{value:(null==t?void 0:t.title)||"",validity:!!(null==t?void 0:t.title),type:"input",config:{label:"Title",required:!0,min:3}},start:{value:(null==t?void 0:t.start)||new Date,validity:!0,type:"date",config:{label:"Start",sm:6}},end:{value:(null==t?void 0:t.end)||new Date,validity:!0,type:"date",config:{label:"End",sm:6}}},r)},ze=()=>{const{fields:e,dialog:t,triggerDialog:s,selectedRange:o,selectedEvent:l,resourceFields:d,selectedResource:c,triggerLoading:u,onConfirm:h,customEditor:g,confirmEvent:p,dialogMaxWidth:v,translations:y}=X(),[m,f]=(0,r.useState)(He(e,l||o)),[j,b]=(0,r.useState)(!1),x=(0,a.useTheme)(),O=(0,a.useMediaQuery)(x.breakpoints.down("sm")),w=(e,t,n)=>{f((r=>Object.assign(Object.assign({},r),{[e]:Object.assign(Object.assign({},r[e]),{value:t,validity:n})})))},_=t=>{t&&f(He(e)),s(!1)},D=()=>{return e=void 0,t=void 0,r=function*(){let e={};for(const t in m)if(e[t]=m[t].value,!g&&!m[t].validity)return b(!0);try{u(!0),e.end=e.start>=e.end?(0,i.addMinutes)(e.start,(0,i.differenceInMinutes)(null==o?void 0:o.end,null==o?void 0:o.start)):e.end;const t=(null==l?void 0:l.event_id)?"edit":"create";h?e=yield h(e,t):e.event_id=(null==l?void 0:l.event_id)||Date.now().toString(36)+Math.random().toString(36).slice(2),p(e,t),_(!0)}catch(e){console.error(e)}finally{u(!1)}},new((n=void 0)||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r},k=t=>{var r,a,i;const s=m[t];switch(s.type){case"input":return(0,n.jsx)(Pe,Object.assign({value:s.value,name:t,onChange:w,touched:j},s.config,{label:y.event[t]||(null===(r=s.config)||void 0===r?void 0:r.label)}));case"date":return(0,n.jsx)(Ie,Object.assign({value:s.value,name:t,onChange:(...e)=>w(...e,!0)},s.config,{label:y.event[t]||(null===(a=s.config)||void 0===a?void 0:a.label)}));case"select":const o=e.find((e=>e.name===t));return(0,n.jsx)(We,Object.assign({value:s.value,name:t,options:(null==o?void 0:o.options)||[],onChange:w,touched:j},s.config,{label:y.event[t]||(null===(i=s.config)||void 0===i?void 0:i.label)}));default:return""}};return(0,n.jsx)(a.Dialog,Object.assign({open:t,fullScreen:O,maxWidth:v},{children:(()=>{if(g){const e={state:m,close:()=>s(!1),loading:e=>u(e),edited:l,onConfirm:p,[d.idField]:c};return g(e)}return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(a.DialogTitle,{children:l?y.form.editTitle:y.form.addTitle}),(0,n.jsx)(a.DialogContent,Object.assign({style:{overflowX:"hidden"}},{children:(0,n.jsx)(a.Grid,Object.assign({container:!0,spacing:2},{children:Object.keys(m).map((e=>{var t;const r=m[e];return(0,n.jsx)(a.Grid,Object.assign({item:!0,sm:null===(t=r.config)||void 0===t?void 0:t.sm,xs:12},{children:k(e)}),e)}))}))})),(0,n.jsxs)(a.DialogActions,{children:[(0,n.jsx)(a.Button,Object.assign({color:"inherit",fullWidth:!0,onClick:()=>_()},{children:y.form.cancel})),(0,n.jsx)(a.Button,Object.assign({color:"primary",fullWidth:!0,onClick:D},{children:y.form.confirm}))]})]})})()}))},Be=({events:e,today:t,eachWeekStart:s,eachFirstDayInCalcRow:o,daysList:l,onViewMore:d,cellHeight:c})=>{const u=Math.round((c-27)/28-1),{translations:h,month:g,locale:p,timeZone:v}=X(),y=(0,r.useMemo)((()=>{const r=[];for(let c=0;c<Math.min(e.length,u+1);c++){const y=H(e[c],v),m=!!o&&(0,i.isBefore)(y.start,o),f=m&&o?o:y.start;let j=P(f,y.end)+1;const b=(0,i.differenceInCalendarWeeks)(y.end,f,{weekStartsOn:null==g?void 0:g.weekStartOn,locale:p})>0;if(b){const e=(0,i.startOfWeek)(y.start),t=(0,i.closestTo)(e,s);t&&(j=l.length-(o?0:(0,i.differenceInDays)(y.start,t)))}const x=e.filter((e=>{const n=P(e.start,e.end),r=n>0,a=0===n&&((0,i.isWithinInterval)(e.start,{start:(0,i.startOfDay)(t),end:(0,i.endOfDay)(t)})||(0,i.isWithinInterval)(e.end,{start:(0,i.startOfDay)(t),end:(0,i.endOfDay)(t)})),s=(0,i.isBefore)(e.start,(0,i.addMinutes)((0,i.startOfDay)(t),1)),l=(0,i.isAfter)(e.end,(0,i.addMinutes)((0,i.endOfDay)(t),-1)),d=s&&l||s&&a||l&&a||a&&r;return!o&&e.event_id!==y.event_id&&u>c&&d}));let O=c;x.length&&(O+=x.length);const w=28*Math.min(O,u)+27;if(O>=u){r.push((0,n.jsx)(a.Typography,Object.assign({width:"100%",className:"rs__multi_day rs__hover__op",style:{top:w,fontSize:11},onClick:e=>{e.stopPropagation(),d(y.start)}},{children:`${Math.abs(e.length-c)} ${h.moreEvents}`}),c));break}r.push((0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:w,width:100*j+"%"}},{children:(0,n.jsx)(Y,{event:y,showdate:!1,multiday:P(y.start,y.end)>0,hasPrev:m,hasNext:b})}),`${y.event_id}_${c}`))}return r}),[e,v,o,null==g?void 0:g.weekStartOn,p,u,s,l.length,t,h.moreEvents,d]);return(0,n.jsx)(r.Fragment,{children:y})};const Ne=()=>{const{month:e,selectedDate:t,height:s,events:o,handleGotoDay:l,getRemoteEvents:d,triggerLoading:c,handleState:u,resources:h,resourceFields:g,fields:p,locale:v,hourFormat:y}=X(),{weekStartOn:m,weekDays:f,startHour:b,endHour:x,cellRenderer:O,headRenderer:w,disableGoToDay:_}=e,D=(0,i.startOfMonth)(t),k=(0,i.endOfMonth)(t),C=(0,i.eachWeekOfInterval)({start:D,end:k},{weekStartsOn:m}),T="12"===y?"hh:mm a":"HH:mm",M=f.map((e=>(0,i.addDays)(C[0],e))),S=s/C.length,E=(0,a.useTheme)(),{headersRef:I,bodyRef:P}=pe(),R=(0,r.useCallback)((()=>{return e=void 0,t=void 0,r=function*(){try{c(!0);const e=C[0],t=(0,i.addDays)(C[C.length-1],M.length),n=yield d({start:e,end:t,view:"month"});n&&(null==n?void 0:n.length)&&u(n,"events")}catch(e){throw e}finally{c(!1)}},new((n=void 0)||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r}),[t,d]);(0,r.useEffect)((()=>{d instanceof Function&&R()}),[R,d]);const W=(0,r.useCallback)((e=>{let s=$(o);e&&(s=F(o,e,g,p));const d=[];for(const o of C){const c=f.map((d=>{const c=(0,i.addDays)(o,d),u=new Date(`${(0,i.format)((0,i.setHours)(c,b),`yyyy/MM/dd ${T}`)}`),h=new Date(`${(0,i.format)((0,i.setHours)(c,x),`yyyy/MM/dd ${T}`)}`),p=g.idField,v=(0,i.isSameDay)(o,c)?c:null,y=s.filter((e=>v&&(0,i.isWithinInterval)(v,{start:(0,i.startOfDay)(e.start),end:(0,i.endOfDay)(e.end)})||(0,i.isSameDay)(e.start,c)));return(0,n.jsxs)("span",Object.assign({style:{height:S},className:"rs__cell"},{children:[(0,n.jsx)(de,{start:u,end:h,day:t,height:S,resourceKey:p,resourceVal:e?e[p]:null,cellRenderer:O}),(0,n.jsxs)(r.Fragment,{children:["function"==typeof w?(0,n.jsx)("div",Object.assign({style:{position:"absolute",top:0}},{children:w(c)})):(0,n.jsx)(a.Avatar,Object.assign({style:{width:27,height:27,position:"absolute",top:0,background:(0,i.isToday)(c)?E.palette.secondary.main:"transparent",color:(0,i.isToday)(c)?E.palette.secondary.contrastText:"",marginBottom:2}},{children:(0,n.jsx)(a.Typography,Object.assign({color:(0,i.isSameMonth)(c,D)?"textPrimary":"#ccc",className:_?"":"rs__hover__op",onClick:e=>{e.stopPropagation(),_||l(c)}},{children:(0,i.format)(c,"dd")}))})),(0,n.jsx)(Be,{events:y,today:c,eachWeekStart:C,eachFirstDayInCalcRow:v,daysList:M,onViewMore:l,cellHeight:S})]})]}),d.toString())}));d.push((0,n.jsx)(r.Fragment,{children:c},o.toString()))}return d}),[S,O,M,_,C,x,o,p,T,l,w,D,g,t,b,E.palette.secondary.contrastText,E.palette.secondary.main,f]),H=(0,r.useCallback)((e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j,Object.assign({days:M.length,ref:I,indent:"0",sticky:"1"},{children:M.map(((e,t)=>(0,n.jsx)(a.Typography,Object.assign({className:"rs__cell rs__header rs__header__center",align:"center",variant:"body2"},{children:(0,i.format)(e,"EE",{locale:v})}),t)))})),(0,n.jsx)(j,Object.assign({days:M.length,ref:P,indent:"0"},{children:W(e)}))]})),[P,M,I,v,W]);return h.length?(0,n.jsx)(se,{renderChildren:H}):H()};const qe=()=>{const{day:e,selectedDate:t,events:o,height:l,getRemoteEvents:d,triggerLoading:c,handleState:u,resources:h,resourceFields:g,resourceViewMode:p,fields:v,direction:y,locale:m,hourFormat:f,timeZone:b}=X(),{startHour:x,endHour:O,step:w,cellRenderer:_,headRenderer:D}=e,k=(0,i.set)(t,{hours:x,minutes:0,seconds:0}),C=(0,i.set)(t,{hours:O,minutes:-w,seconds:0}),T=(0,i.eachMinuteOfInterval)({start:k,end:C},{step:w}),M=I(l,T.length),S=E(M,w),P="12"===f?"hh:mm a":"HH:mm",{headersRef:$,bodyRef:H}=pe(),z=(0,r.useCallback)((()=>{return e=void 0,t=void 0,r=function*(){try{c(!0);const e=(0,i.addDays)(k,-1),t=(0,i.addDays)(C,1),n=yield d({start:e,end:t,view:"day"});n&&(null==n?void 0:n.length)&&u(n,"events")}catch(e){throw e}finally{c(!1)}},new((n=void 0)||(n=Promise))((function(a,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function o(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r}),[t,d]);(0,r.useEffect)((()=>{d instanceof Function&&z()}),[z,d]);const B=e=>{const r=W(e,t,b);return(0,n.jsx)("div",Object.assign({className:"rs__block_col",style:{height:28*e.length}},{children:r.map(((e,r)=>{const a=(0,i.isBefore)(e.start,(0,i.startOfDay)(t)),s=(0,i.isAfter)(e.end,(0,i.endOfDay)(t));return(0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*r,width:"99.9%",overflowX:"hidden"}},{children:(0,n.jsx)(Y,{event:e,multiday:!0,hasPrev:a,hasNext:s})}),e.event_id)}))}))},N=e=>{let l=o;e&&(l=F(o,e,g,v));const d=h.length&&"tabs"!==p,c=28*W(d?o:l,t,b).length+45;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(j,Object.assign({days:1,ref:$,sticky:"1"},{children:[(0,n.jsx)("span",{className:"rs__cell"}),(0,n.jsxs)("span",Object.assign({className:"rs__cell rs__header "+((0,i.isToday)(t)?"rs__today_cell":""),style:{height:c}},{children:["function"==typeof D?(0,n.jsx)("div",{children:D(t)}):(0,n.jsx)(s,{date:t,locale:m}),B(l)]}))]})),(0,n.jsx)(j,Object.assign({days:1,ref:H},{children:T.map(((s,o)=>{const d=new Date(`${(0,i.format)(t,"yyyy/MM/dd")} ${(0,i.format)(s,P)}`),c=(0,i.addMinutes)(d,w),u=g.idField;return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)("span",Object.assign({className:"rs__cell rs__header rs__time",style:{height:M}},{children:(0,n.jsx)(a.Typography,Object.assign({variant:"caption"},{children:(0,i.format)(s,P,{locale:m})}))})),(0,n.jsxs)("span",Object.assign({className:"rs__cell "+((0,i.isToday)(t)?"rs__today_cell":"")},{children:[0===o&&(0,n.jsx)(ge,{todayEvents:R(l,t,b),today:k,minuteHeight:S,startHour:x,step:w,direction:y,timeZone:b}),(0,n.jsx)(de,{start:d,end:c,day:t,height:M,resourceKey:u,resourceVal:e?e[u]:null,cellRenderer:_})]}))]},o)}))}))]})};return h.length?(0,n.jsx)(se,{span:2,renderChildren:N}):N()},Ae=(0,r.forwardRef)((function(e,t){const i=X(),{view:s,dialog:o,loading:l,resourceViewMode:d,resources:c,translations:u}=i,h=(0,r.useMemo)((()=>{switch(s){case"month":return(0,n.jsx)(Ne,{});case"week":return(0,n.jsx)(ve,{});case"day":return(0,n.jsx)(qe,{});default:return""}}),[s]);return(0,n.jsxs)(m,Object.assign({dialog:o?1:0,"data-testid":"rs-wrapper",ref:e=>{t&&(t.current={el:e,scheduler:i})}},{children:[l&&(0,n.jsx)("div",Object.assign({className:"rs__table_loading"},{children:(0,n.jsxs)("span",{children:[(0,n.jsx)(a.CircularProgress,{size:50}),(0,n.jsx)(a.Typography,Object.assign({align:"center"},{children:u.loading}))]})})),(0,n.jsx)(Se,{}),(0,n.jsx)(f,Object.assign({resource_count:"tabs"===d?1:c.length,sx:{overflowX:"default"===d&&c.length>1?"auto":void 0},"data-testid":"grid"},{children:h})),o&&(0,n.jsx)(ze,{})]}))}));const Le=({children:e,initial:t})=>{const[a,s]=(0,r.useState)(Object.assign(Object.assign({},Z),G(t)));(0,r.useEffect)((()=>{s((e=>Object.assign(Object.assign({},e),{onEventDrop:t.onEventDrop,customEditor:t.customEditor})))}),[t.onEventDrop,t.customEditor]);const o=()=>(e=>{const t=[];return e.month&&t.push("month"),e.week&&t.push("week"),e.day&&t.push("day"),t})(a),l=e=>{void 0===t.loading&&s((t=>Object.assign(Object.assign({},t),{loading:e})))},d=(e,t)=>{let n;n="edit"===t?Array.isArray(e)?a.events.map((t=>{const n=e.find((e=>e.event_id===t.event_id));return n?Object.assign(Object.assign({},t),n):t})):a.events.map((t=>t.event_id===e.event_id?Object.assign(Object.assign({},t),e):t)):a.events.concat(e),s((e=>Object.assign(Object.assign({},e),{events:n})))};return(0,n.jsx)(K.Provider,Object.assign({value:Object.assign(Object.assign({},a),{handleState:(e,t)=>{s((n=>Object.assign(Object.assign({},n),{[t]:e})))},getViews:o,triggerDialog:(e,t)=>{const n=t;s((t=>{var r;return Object.assign(Object.assign({},t),{dialog:e,selectedRange:(null==n?void 0:n.event_id)?void 0:n||{start:new Date,end:new Date(Date.now()+36e5)},selectedEvent:(null==n?void 0:n.event_id)?n:void 0,selectedResource:null==n?void 0:n[null===(r=a.resourceFields)||void 0===r?void 0:r.idField]})}))},triggerLoading:l,handleGotoDay:e=>{const t=o();t.includes("day")?s((t=>Object.assign(Object.assign({},t),{view:"day",selectedDate:e}))):t.includes("week")?s((t=>Object.assign(Object.assign({},t),{view:"week",selectedDate:e}))):console.warn("No Day/Week views available")},confirmEvent:d,onDrop:(e,t,n,r)=>{return s=void 0,o=void 0,u=function*(){var s;const o=a.events.find((t=>"number"==typeof t.event_id?t.event_id===+e:t.event_id===e)),c=a.fields.find((e=>e.name===n)),u=!!(null===(s=null==c?void 0:c.config)||void 0===s?void 0:s.multiple);let h=r;if(c){const e=o[n],a=S(c,e,o).value;if(u)if(a.includes(r)){if((0,i.isEqual)(o.start,t))return;h=a}else h=a.length>1?[...a,r]:[r]}if((0,i.isEqual)(o.start,t)&&(!h||!u&&h===o[n]))return;const g=(0,i.differenceInMinutes)(o.end,o.start),p=Object.assign(Object.assign({},o),{start:t,end:(0,i.addMinutes)(t,g),[n]:h||""});if(!a.onEventDrop||"function"!=typeof a.onEventDrop)return d(p,"edit");try{l(!0);const e=yield a.onEventDrop(t,p,o);e&&d(e,"edit")}finally{l(!1)}},new((c=void 0)||(c=Promise))((function(e,t){function n(e){try{a(u.next(e))}catch(e){t(e)}}function r(e){try{a(u.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof c?a:new c((function(e){e(a)}))).then(n,r)}a((u=u.apply(s,o||[])).next())}));var s,o,c,u}})},{children:e}))},Ve=(0,r.forwardRef)((function(e,t){return(0,n.jsx)(Le,Object.assign({initial:e},{children:(0,n.jsx)(Ae,{ref:t})}))}));module.exports=t})();